name: grazing-rotation-real
description: Your actual 5-paddock rotation system near Collinsville, TX

# REAL FARM MODEL - Collinsville, TX
# 5 paddocks, 14 head (3 yearlings @ 400kg, 11 mature @ 600kg)
# Adaptive rotational grazing with electric wire subdivisions
# Goal: Find optimal rotation timing, plan for drought, minimize hay feeding

params:
  # ============================================================
  # HERD CHARACTERISTICS
  # ============================================================
  herd_count: 14
  yearlings: 3  # 400kg each
  mature_cattle: 11  # 600kg each
  total_herd_weight: 7800  # kg (3*400 + 11*600)
  daily_intake_rate: 0.025  # 2.5% of body weight per day

  # Herd location (which paddock: 1=CCE, 2=CCW, 3=Big, 4=Hog, 5=South)
  current_paddock: 3  # Currently in Big Pasture
  rotation_days: 14  # Days to graze each paddock before moving

  # ============================================================
  # PADDOCK ACREAGE
  # ============================================================
  cce_acres: 8   # Cedar Crest East
  ccw_acres: 8   # Cedar Crest West
  big_acres: 9   # Big Pasture
  hog_acres: 5   # Hog Pasture
  south_acres: 8  # South Pasture (Frankie's)

  # ============================================================
  # FORAGE GROWTH PARAMETERS (BASE)
  # ============================================================
  max_growth_rate: 80  # kg/acre/day at optimal conditions (summer)
  optimal_forage: 2500  # kg/acre carrying capacity (lush pasture)
  min_forage_threshold: 300  # kg/acre - severe overgrazing damage below this

  # ============================================================
  # SEASONAL ADJUSTMENTS
  # ============================================================
  winter_dormancy_factor: 0.1  # Growth drops to 10% in winter (Nov-Mar)
  summer_growth_boost: 1.0  # Full growth in summer (Apr-Oct)

  # Current season (0=winter, 1=growing season)
  # January = winter dormancy active
  season_multiplier: 0.1

  # ============================================================
  # WEATHER / MOISTURE PARAMETERS (COLLINSVILLE, TX)
  # ============================================================
  base_rain_input: 3  # mm/day average (will replace with real data later)
  base_evaporation: 4  # mm/day baseline

  # Paddock-specific evaporation multipliers
  cce_evap_mult: 1.3   # Open hilltop - high evaporation
  ccw_evap_mult: 0.9   # Silvopasture - tree shade reduces evap
  big_evap_mult: 0.8   # Wooded flood plain - low evaporation
  hog_evap_mult: 0.7   # Creek + trees - lowest evaporation
  south_evap_mult: 1.1  # Open flood plain - moderate evaporation

  # Flood plain bonus (extra water during rain events)
  big_flood_bonus: 0.5   # Big gets runoff from Cedar Crests
  hog_flood_bonus: 0.3   # Hog gets some runoff + creek seepage
  south_flood_bonus: 0.2  # South gets moderate flood benefit

  field_capacity: 100  # mm maximum soil moisture
  moisture_optimal: 60  # mm soil moisture for best growth

  # ============================================================
  # SOIL ORGANIC MATTER DYNAMICS
  # ============================================================
  som_mineralization_rate: 0.0001  # SOM slowly mineralizes
  manure_addition_rate: 0.00005  # Grazing adds SOM via manure/urine
  som_growth_multiplier: 20  # SOM boost to growth rate

  # ============================================================
  # GRAZING INTENSITY
  # ============================================================
  trampling_loss_rate: 0.3  # 30% of consumed forage also trampled/wasted

# ============================================================
# STOCKS - CEDAR CREST EAST (Hilltop, Open)
# ============================================================
stocks:
  cce_forage:
    initial: 2200  # Well-rested, good condition

  cce_moisture:
    initial: 50  # Drier (hilltop, open, good drainage)

  cce_som:
    initial: 3.2  # Decent soil health

  # ============================================================
  # STOCKS - CEDAR CREST WEST (Slope, Silvopasture)
  # ============================================================
  ccw_forage:
    initial: 2100  # Well-rested

  ccw_moisture:
    initial: 60  # Better moisture (tree shade)

  ccw_som:
    initial: 3.5  # Good soil (trees contribute OM)

  # ============================================================
  # STOCKS - BIG PASTURE (Flood Plain, Wooded)
  # Currently being grazed - forage is lower
  # ============================================================
  big_forage:
    initial: 1200  # Currently grazed down

  big_moisture:
    initial: 75  # Flood plain - wet

  big_som:
    initial: 3.8  # Good soil (flood plain fertility)

  # ============================================================
  # STOCKS - HOG PASTURE (Flood Plain + Creek)
  # ============================================================
  hog_forage:
    initial: 2400  # Lush (creek access, rested)

  hog_moisture:
    initial: 85  # Wettest paddock (creek + flood)

  hog_som:
    initial: 4.0  # Best soil (riparian zone)

  # ============================================================
  # STOCKS - SOUTH PASTURE (Open Flood Plain)
  # ============================================================
  south_forage:
    initial: 2000  # Moderate condition

  south_moisture:
    initial: 65  # Moderate flood benefit

  south_som:
    initial: 3.3  # Decent soil

  # ============================================================
  # ROTATION TRACKING
  # ============================================================
  rotation_timer:
    initial: 0  # Days in current paddock (resets at rotation_days)

# ============================================================
# FLOWS - CEDAR CREST EAST
# ============================================================
flows:
  # --- FORAGE DYNAMICS ---
  cce_growth:
    from: external
    to: cce_forage
    rate: "current_paddock == 1 ? 0 : (max_growth_rate * season_multiplier * (cce_forage / optimal_forage) * (1 - cce_forage / optimal_forage) * (cce_moisture / moisture_optimal) * (1 + cce_som * som_growth_multiplier / 100))"
    # No growth while being grazed (current_paddock == 1)
    # Otherwise: logistic growth modified by moisture and SOM

  cce_grazing:
    from: cce_forage
    to: external
    rate: "current_paddock == 1 ? min((total_herd_weight * daily_intake_rate) / cce_acres, cce_forage * 0.15) : 0"
    # Only graze if herd is in this paddock (current_paddock == 1)
    # Can't graze more than 15% of standing biomass per day

  cce_trampling:
    from: cce_forage
    to: external
    rate: "cce_grazing * trampling_loss_rate"

  # --- SOIL MOISTURE ---
  cce_rain:
    from: external
    to: cce_moisture
    rate: base_rain_input

  cce_evapotranspiration:
    from: cce_moisture
    to: external
    rate: "base_evaporation * cce_evap_mult * (1 + cce_forage / optimal_forage * 0.5)"

  cce_deep_percolation:
    from: cce_moisture
    to: external
    rate: "max(0, cce_moisture - field_capacity) * 0.5"

  # --- SOIL ORGANIC MATTER ---
  cce_som_loss:
    from: cce_som
    to: external
    rate: "cce_som * som_mineralization_rate"

  cce_manure:
    from: external
    to: cce_som
    rate: "cce_grazing * manure_addition_rate"

  # ============================================================
  # FLOWS - CEDAR CREST WEST
  # ============================================================
  ccw_growth:
    from: external
    to: ccw_forage
    rate: "current_paddock == 2 ? 0 : (max_growth_rate * season_multiplier * (ccw_forage / optimal_forage) * (1 - ccw_forage / optimal_forage) * (ccw_moisture / moisture_optimal) * (1 + ccw_som * som_growth_multiplier / 100))"

  ccw_grazing:
    from: ccw_forage
    to: external
    rate: "current_paddock == 2 ? min((total_herd_weight * daily_intake_rate) / ccw_acres, ccw_forage * 0.15) : 0"

  ccw_trampling:
    from: ccw_forage
    to: external
    rate: "ccw_grazing * trampling_loss_rate"

  ccw_rain:
    from: external
    to: ccw_moisture
    rate: base_rain_input

  ccw_evapotranspiration:
    from: ccw_moisture
    to: external
    rate: "base_evaporation * ccw_evap_mult * (1 + ccw_forage / optimal_forage * 0.5)"

  ccw_deep_percolation:
    from: ccw_moisture
    to: external
    rate: "max(0, ccw_moisture - field_capacity) * 0.5"

  ccw_som_loss:
    from: ccw_som
    to: external
    rate: "ccw_som * som_mineralization_rate"

  ccw_manure:
    from: external
    to: ccw_som
    rate: "ccw_grazing * manure_addition_rate"

  # ============================================================
  # FLOWS - BIG PASTURE (Currently being grazed!)
  # ============================================================
  big_growth:
    from: external
    to: big_forage
    rate: "current_paddock == 3 ? 0 : (max_growth_rate * season_multiplier * (big_forage / optimal_forage) * (1 - big_forage / optimal_forage) * (big_moisture / moisture_optimal) * (1 + big_som * som_growth_multiplier / 100))"

  big_grazing:
    from: big_forage
    to: external
    rate: "current_paddock == 3 ? min((total_herd_weight * daily_intake_rate) / big_acres, big_forage * 0.15) : 0"

  big_trampling:
    from: big_forage
    to: external
    rate: "big_grazing * trampling_loss_rate"

  big_rain:
    from: external
    to: big_moisture
    rate: "base_rain_input + big_flood_bonus"
    # Gets bonus water from runoff

  big_evapotranspiration:
    from: big_moisture
    to: external
    rate: "base_evaporation * big_evap_mult * (1 + big_forage / optimal_forage * 0.5)"

  big_deep_percolation:
    from: big_moisture
    to: external
    rate: "max(0, big_moisture - field_capacity) * 0.5"

  big_som_loss:
    from: big_som
    to: external
    rate: "big_som * som_mineralization_rate"

  big_manure:
    from: external
    to: big_som
    rate: "big_grazing * manure_addition_rate"

  # ============================================================
  # FLOWS - HOG PASTURE
  # ============================================================
  hog_growth:
    from: external
    to: hog_forage
    rate: "current_paddock == 4 ? 0 : (max_growth_rate * season_multiplier * (hog_forage / optimal_forage) * (1 - hog_forage / optimal_forage) * (hog_moisture / moisture_optimal) * (1 + hog_som * som_growth_multiplier / 100))"

  hog_grazing:
    from: hog_forage
    to: external
    rate: "current_paddock == 4 ? min((total_herd_weight * daily_intake_rate) / hog_acres, hog_forage * 0.15) : 0"

  hog_trampling:
    from: hog_forage
    to: external
    rate: "hog_grazing * trampling_loss_rate"

  hog_rain:
    from: external
    to: hog_moisture
    rate: "base_rain_input + hog_flood_bonus"

  hog_evapotranspiration:
    from: hog_moisture
    to: external
    rate: "base_evaporation * hog_evap_mult * (1 + hog_forage / optimal_forage * 0.5)"

  hog_deep_percolation:
    from: hog_moisture
    to: external
    rate: "max(0, hog_moisture - field_capacity) * 0.5"

  hog_som_loss:
    from: hog_som
    to: external
    rate: "hog_som * som_mineralization_rate"

  hog_manure:
    from: external
    to: hog_som
    rate: "hog_grazing * manure_addition_rate"

  # ============================================================
  # FLOWS - SOUTH PASTURE
  # ============================================================
  south_growth:
    from: external
    to: south_forage
    rate: "current_paddock == 5 ? 0 : (max_growth_rate * season_multiplier * (south_forage / optimal_forage) * (1 - south_forage / optimal_forage) * (south_moisture / moisture_optimal) * (1 + south_som * som_growth_multiplier / 100))"

  south_grazing:
    from: south_forage
    to: external
    rate: "current_paddock == 5 ? min((total_herd_weight * daily_intake_rate) / south_acres, south_forage * 0.15) : 0"

  south_trampling:
    from: south_forage
    to: external
    rate: "south_grazing * trampling_loss_rate"

  south_rain:
    from: external
    to: south_moisture
    rate: "base_rain_input + south_flood_bonus"

  south_evapotranspiration:
    from: south_moisture
    to: external
    rate: "base_evaporation * south_evap_mult * (1 + south_forage / optimal_forage * 0.5)"

  south_deep_percolation:
    from: south_moisture
    to: external
    rate: "max(0, south_moisture - field_capacity) * 0.5"

  south_som_loss:
    from: south_som
    to: external
    rate: "south_som * som_mineralization_rate"

  south_manure:
    from: external
    to: south_som
    rate: "south_grazing * manure_addition_rate"

  # ============================================================
  # ROTATION TRACKING
  # ============================================================
  rotation_timer_increment:
    from: external
    to: rotation_timer
    rate: 1
    # This just counts days - you'll manually reset when rotating paddocks
